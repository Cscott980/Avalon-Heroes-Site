<!doctype html>
<html lang="en">
<head>
  <link rel="icon" type="image/png" href="assets/gem_icon.png">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Avalon Heroes</title>
  <meta name="description" content="Avalon Heroes is an in-development educational action-RPG with classroom-friendly co-op play." />
  <link rel="stylesheet" href="css/style.css" />
  <meta name="keywords" content="educational game, edtech, action RPG, classroom game, godot game">
  <meta name="author" content="Avalon Studios">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Titan+One&display=swap" rel="stylesheet">

</head>

<body>
  <header class="site-hero">
    <div class="hero-banner">
      <img
        src="assets/avalon_heroes_logo.png"
        alt="Avalon Heroes logo"
        class="hero-logo"
      />
    </div>

    <nav class="main-nav">
      <a href="index.html">Home</a>
      <a href="updates.html">Devlog</a>
    </nav>


  <main class="wrap">
    <section class="hero" id="about">
      <h1 class="hero-title">
        Hack, learn, and protect the world of
        <span>Avalon</span>
      </h1>
      <p class="lead">
        Avalon Heroes is an <strong>EdTech action-RPG</strong> designed for fast sessions, classroom play,
        and satisfying combat. Start with <strong>Horde Mode</strong>, then expand into new classes and bosses over time.
      </p>

      <div class="cta-row" id="demo">
        <a class="btn primary disabled" href="#" aria-disabled="true" title="Demo not public yet">
          Play Demo (Soon)
        </a>
        <a class="btn" href="updates.html">See Progress</a>
      </div>

      <div class="note">
        Demo plan: <strong>Warrior + Mage</strong> ‚Ä¢ <strong>Horde Mode only</strong> ‚Ä¢ No bosses (for now)
      </div>
    </section>
    <section class="class-preview">

      <h2>Choose Your Hero</h2>

      <div class="class-tabs">
        <button class="class-tab active" data-class="warrior" style="--class:#ff5a4f;">Warrior</button>
        <button class="class-tab" data-class="mage" style="--class:#6bd4ff;">Mage</button>
        <button class="class-tab" data-class="paladin" style="--class:#ffd56a;">Paladin</button>
        <button class="class-tab" data-class="ranger" style="--class:#7bff8a;">Ranger</button>
        <button class="class-tab" data-class="rogue" style="--class:#c08bff;">Rogue</button>
        <button class="class-tab" data-class="engineer" style="--class:#ff9a4a;">Engineer</button>
        <button class="class-tab" data-class="druid" style="--class:#4fffd7;">Druid</button>
      </div>

      <div class="class-panels">
        <div class="class-panel active" id="warrior" style="--class:#ff5a4f;">
          <div class="panel-particles" aria-hidden="true">
            <span class="p"></span><span class="p"></span><span class="p"></span><span class="p"></span>
            <span class="p"></span><span class="p"></span><span class="p"></span><span class="p"></span>
            <span class="p"></span><span class="p"></span><span class="p"></span><span class="p"></span>
          </div>
          <div class="class-art">
            <img src="assets/Characters/Warrior.png" alt="Warrior">
          </div>
          <div class="class-info">
            <h3 class="class-title">Warrior</h3>
            <p class="class-desc">
              A frontline fighter who thrives in the heat of battle. Build rage through melee hits and unleash
              devastating area attacks to control the battlefield.
            </p>
          </div>
        </div>

        <div class="class-panel" id="mage" style="--class:#6bd4ff;">
          <div class="panel-particles" aria-hidden="true">
            <span class="p"></span><span class="p"></span><span class="p"></span><span class="p"></span>
            <span class="p"></span><span class="p"></span><span class="p"></span><span class="p"></span>
            <span class="p"></span><span class="p"></span><span class="p"></span><span class="p"></span>
          </div>
          <div class="class-art">
            <img src="assets/Characters/Mage.png" alt="Mage">
          </div>
          <div class="class-info">
            <h3 class="class-title">Mage</h3>
            <p class="class-desc">
              Masters of elemental magic who devastate enemies from afar. Control space with powerful spells and bursts.
            </p>
          </div>
        </div>

        <div class="class-panel" id="paladin" style="--class:#ffd56a;">
          <div class="panel-particles" aria-hidden="true">
            <span class="p"></span><span class="p"></span><span class="p"></span><span class="p"></span>
            <span class="p"></span><span class="p"></span><span class="p"></span><span class="p"></span>
            <span class="p"></span><span class="p"></span><span class="p"></span><span class="p"></span>
          </div>
          <div class="class-art">
            <img src="assets/Characters/Paladin.png" alt="Paladin">
          </div>
          <div class="class-info">
            <h3 class="class-title">Paladin</h3>
            <p class="class-desc">
              Holy warriors who protect allies and smite foes. A sturdy shield line with supportive divine power.
            </p>
          </div>
        </div>
        <div class="class-panel" id="ranger" style="--class:#7bff8a;">
          <div class="panel-particles" aria-hidden="true">
            <span class="p"></span><span class="p"></span><span class="p"></span><span class="p"></span>
            <span class="p"></span><span class="p"></span><span class="p"></span><span class="p"></span>
            <span class="p"></span><span class="p"></span><span class="p"></span><span class="p"></span>
          </div>
          <div class="class-art">
            <img src="assets/Characters/Ranger.png" alt="Ranger">
          </div>
          <div class="class-info">
            <h3 class="class-title">Ranger</h3>
            <p class="class-desc">
              Precise archers who excel at picking targets from a distance. Rangers kite enemies,
              control lanes with traps, and punish openings with rapid bow attacks.
            </p>
          </div>
        </div>

        <div class="class-panel" id="rogue" style="--class:#c08bff;">
          <div class="panel-particles" aria-hidden="true">
            <span class="p"></span><span class="p"></span><span class="p"></span><span class="p"></span>
            <span class="p"></span><span class="p"></span><span class="p"></span><span class="p"></span>
            <span class="p"></span><span class="p"></span><span class="p"></span><span class="p"></span>
          </div>
          <div class="class-art">
            <img src="assets/Characters/Rogue.png" alt="Rogue">
          </div>
          <div class="class-info">
            <h3 class="class-title">Rogue</h3>
            <p class="class-desc">
              Fast, evasive duelists who strike before enemies can react. Rogues weave in and out of combat,
              stacking damage through combos, backstabs, and quick dagger bursts.
            </p>
          </div>
        </div>

        <div class="class-panel" id="engineer" style="--class:#ff9a4a;">
          <div class="panel-particles" aria-hidden="true">
            <span class="p"></span><span class="p"></span><span class="p"></span><span class="p"></span>
            <span class="p"></span><span class="p"></span><span class="p"></span><span class="p"></span>
            <span class="p"></span><span class="p"></span><span class="p"></span><span class="p"></span>
          </div>
          <div class="class-art">
            <img src="assets/Characters/Engineer.png" alt="Engineer">
          </div>
          <div class="class-info">
            <h3 class="class-title">Engineer</h3>
            <p class="class-desc">
              Gadget specialists who fight with firearms and inventions. Engineers set up turrets,
              control space with tools, and support the team with clever utility.
            </p>
          </div>
        </div>

        <div class="class-panel" id="druid" style="--class:#4fffd7;">
          <div class="panel-particles" aria-hidden="true">
            <span class="p"></span><span class="p"></span><span class="p"></span><span class="p"></span>
            <span class="p"></span><span class="p"></span><span class="p"></span><span class="p"></span>
            <span class="p"></span><span class="p"></span><span class="p"></span><span class="p"></span>
          </div>
          <div class="class-art">
            <img src="assets/Characters/Druid.png" alt="Druid">
          </div>
          <div class="class-info">
            <h3 class="class-title">Druid</h3>
            <p class="class-desc">
              Nature casters who bend the battlefield with roots, wind, and healing. Druids thrive in control play,
              empowering allies while disrupting enemy movement and positioning.
            </p>
          </div>
        </div>

        <!-- Add the other class panels the same way... -->

      </div>
    </section>

    <section class="grid" id="features">
      <div class="card">
        <h2>Classroom-friendly</h2>
        <p>Designed for quick sessions, simple onboarding, and browser play on common school devices.</p>
      </div>

      <div class="card">
        <h2>Action first</h2>
        <p>Responsive movement, abilities, and upgrade choices that make the gameplay feel rewarding.</p>
      </div>

      <div class="card">
        <h2>Expandable</h2>
        <p>Start small and ship often: new heroes, modes, quizzes, and bosses can be added over time.</p>
      </div>
    </section>
    <section class="newsletter-card">
      <form name="avalon-newsletter" method="POST" data-netlify="true">
        <input type="hidden" name="form-name" value="avalon-newsletter">

        <h3>üì¨ Follow Avalon Heroes</h3>
        <p class="newsletter-sub">
          Get development updates, classroom demos, and early playtest invites.
        </p>
        <p class="hidden">
          <label>Don‚Äôt fill this out: <input name="bot-field" /></label>
        </p>
        <div class="newsletter-row">
          <input
            type="email"
            name="email"
            placeholder="your@email.com"
            required
          />
          <button type="submit">Notify Me</button>
        </div>

        <small class="newsletter-note">
          No spam. 1‚Äì2 emails per month. Unsubscribe anytime.
        </small>
      </form>
    </section>

  </main>

  <footer class="footer">
    <div>¬© <span id="year"></span> Avalon Heroes</div>
    <div class="muted">Built with care. No personal details required.</div>
  </footer>

  <script>
    document.getElementById("year").textContent = new Date().getFullYear();

    const tabs = document.querySelectorAll(".class-tab");
    const panels = document.querySelectorAll(".class-panel");

    function showPanel(id) {
      tabs.forEach(t => t.classList.remove("active"));
      panels.forEach(p => p.classList.remove("active", "animating"));

      const tab = document.querySelector(`.class-tab[data-class="${id}"]`);
      const panel = document.getElementById(id);
      if (!tab || !panel) return;

      tab.classList.add("active");
      panel.classList.add("active");

      // restart your slide/fade animations
      panel.classList.remove("animating");
      void panel.offsetWidth;
      panel.classList.add("animating");

      // restart particle animations (THIS is where it belongs)
      const fx = panel.querySelector(".panel-particles");
      if (fx) {
        fx.style.display = "none";
        void fx.offsetHeight;
        fx.style.display = "";
      }
    }

    tabs.forEach(tab => tab.addEventListener("click", () => showPanel(tab.dataset.class)));

    const initial = document.querySelector(".class-tab.active")?.dataset.class;
    if (initial) showPanel(initial);

  // ===============================
  // Newsletter toast + Netlify submit
  // ===============================
  const form = document.querySelector('form[name="avalon-newsletter"]');
  const toast = document.getElementById("toast");
  const toastText = document.getElementById("toastText");
  let toastTimer = null;

  function showToast(message, isError=false){
    if (!toast || !toastText) return;

    toastText.textContent = message;
    toast.classList.toggle("error", isError);
    toast.classList.add("show");

    clearTimeout(toastTimer);
    toastTimer = setTimeout(() => toast.classList.remove("show"), 3200);
  }

  function encodeFormData(formEl){
    const data = new FormData(formEl);
    return new URLSearchParams(data).toString();
  }

  if (form) {
    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      const btn = form.querySelector('button[type="submit"]');
      const emailInput = form.querySelector('input[name="email"]');

      // tiny UX: disable button while sending
      if (btn) {
        btn.disabled = true;
        btn.style.opacity = "0.8";
      }

      try {
        const body = encodeFormData(form);

        const res = await fetch("/", {
          method: "POST",
          headers: { "Content-Type": "application/x-www-form-urlencoded" },
          body
        });

        if (!res.ok) throw new Error("Network response was not ok");

        showToast("‚úÖ You‚Äôre on the list! Check your inbox soon.");
        form.reset();

        // keep cursor ready for the next signup
        if (emailInput) emailInput.focus();

      } catch (err) {
        showToast("‚ö†Ô∏è Couldn‚Äôt sign you up. Please try again.", true);
      } finally {
        if (btn) {
          btn.disabled = false;
          btn.style.opacity = "";
        }
      }
    });
  }

  </script>
<!-- Toast -->
  <div id="toast" class="toast" role="status" aria-live="polite" aria-atomic="true">
    <span class="toast__icon" aria-hidden="true">‚ú®</span>
    <span id="toastText" class="toast__text">Subscribed!</span>
  </div>

</body>
</html>
